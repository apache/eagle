<!DOCTYPE html>
<head>
  	<meta charset="utf-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge">

 	<title>Eagle - User Profile Tutorial</title>
 	<meta name="description" content="Eagle - Analyze Big Data Platforms for Security and Performance">

	<meta name="keywords" content="Eagle, Hadoop, Security, Real Time">
	<meta name="author" content="eBay Inc.">

	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1">

	<link rel="stylesheet" href="/css/animate.css">
	<link rel="stylesheet" href="/css/bootstrap.min.css">

	<link rel="stylesheet" href="/css/font-awesome.min.css">
	
	<link rel="stylesheet" href="/css/misc.css">
	<link rel="stylesheet" href="/css/style.css">
	<link rel="stylesheet" href="/css/styles.css">
  	<link rel="stylesheet" href="/css/main.css">
  	<link rel="alternate" type="application/rss+xml" title="Eagle" href="http://goeagle.io/feed.xml" />
  	<link rel="shortcut icon" href="/images/favicon.png">

  	<!-- Baidu Analytics Tracking-->
	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?fedc55df2ea52777a679192e8f849ece";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>
	
	<!-- Google Analytics Tracking -->
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	  ga('create', 'UA-68929805-1', 'auto');
	  ga('send', 'pageview');
	</script>
</head>
<body>
<!-- header start -->
<div id="home_page">
  <div class="topbar">
    <div class="container">
      <div class="row" >
        <nav class="navbar navbar-default">
          <div class="container-fluid"> 
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button>
              <a class="navbar-brand" href="/"><img src="/images/logo2.png" height="44px" style="margin-top:-7px"></a> </div>
            
            <!-- Collect the nav links, forms, and other content for toggling -->
            <!-- <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right" id="top-menu">
                <li><a class="menu" href="/#home_page">HOME</a></li>
                <li><a class="menu" href="/docs/">DOCS</a></li>
                <li><a class="menu" href="/#about_page">ABOUT</a></li>
                <li><a class="menu" href="/#diagram_page">ARCHITECTURE</a></li>
                <li><a class="menu" href="/#modules_page">MODULES</a></li>
                <li><a class="menu" href="/#usecase_page">USE CASES</a></li>
                <li>
                </li>
              </ul> -->
            </div>
          </div>
          <!-- /.container-fluid --> 
        </nav>
      </div>
    </div>
  </div>
  <div class="headerimage">
    <div class="flexslider">
      <ul class="slides">
        <li><img src="/images/slider/4.jpg" alt="Slide 1"></li>
      </ul>
    </div>
  </div>
  <div class="particles" style="height:40%"> </div><!---particles-->
  <div class="slider-caption" style="top:80px;">
    <div class="homewrapper">
      <div class="hometitle"> 
        <a href="/">
          <img src="/images/feather.png" height="80px">
        </a>
      </div>
      <div class="hometext">
        <h2>Analyze Big Data Platforms For Security and Performance</h2>
        <div class="social-buttons">
          <a href="https://github.com/apache/eagle"><i class="fa fa-github"></i></a>
          <a href="http://twitter.com/TheApacheEagle"><i class="fa fa-twitter"></i></a>
          <a href="https://www.facebook.com/TheApacheEagle/"><i class="fa fa-facebook"></i></a>
          <a href="#"><i class="fa fa-weixin"></i></a>
          <!-- <a href="https://www.weibo.com/ApacheEagle/"><i class="fa fa-weibo"></i></a> -->
        </div>
     </div>
    </div>
  </div>
</div>
<!-- header end -->
<div class="container-fluid page-content">
  <div class="row">
    <div class="col-md-10 col-md-offset-1"> 
      <!-- sidebar -->
      <div class="col-xs-6 col-sm-3" id="sidebar" role="navigation">
        <ul class="nav" id="adminnav">
         
        <li class="heading">Getting Started</li>
        
          <li class="sidenavli  "><a href="/docs/index.html" data-permalink="/docs/tutorial/userprofile.html" id="">Introduction</a></li>
        
          <li class="sidenavli  "><a href="/docs/usecases.html" data-permalink="/docs/tutorial/userprofile.html" id="">Use Cases</a></li>
        
          <li class="sidenavli  "><a href="/docs/terminology.html" data-permalink="/docs/tutorial/userprofile.html" id="">Terminology</a></li>
        
          <li class="sidenavli  "><a href="/docs/ecosystem.html" data-permalink="/docs/tutorial/userprofile.html" id="">Ecosystem</a></li>
        
          <li class="sidenavli  "><a href="/docs/community.html" data-permalink="/docs/tutorial/userprofile.html" id="">Community</a></li>
        
          <li class="sidenavli  "><a href="/docs/FAQ.html" data-permalink="/docs/tutorial/userprofile.html" id="">FAQ</a></li>
        
        <li class="divider"></li>
       
        <li class="heading">Documentations</li>
        
          <li class="sidenavli  "><a href="/docs/latest/" data-permalink="/docs/tutorial/userprofile.html" id="">Latest version (v0.5.0)</a></li>
        
        <li class="divider"></li>
       
        <li class="heading">Download</li>
        
          <li class="sidenavli  "><a href="/docs/download-latest.html" data-permalink="/docs/tutorial/userprofile.html" id="">Latest version (v0.5.0)</a></li>
        
          <li class="sidenavli  "><a href="/docs/download.html" data-permalink="/docs/tutorial/userprofile.html" id="">Archived</a></li>
        
        <li class="divider"></li>
       
        <li class="heading">Supplement</li>
        
          <li class="sidenavli  "><a href="/docs/security.html" data-permalink="/docs/tutorial/userprofile.html" id="">Security</a></li>
        
        <li class="divider"></li>
      
        <li class="sidenavli">
          <a href="mailto:dev@eagle.apache.org" target="_blank">Need Help?</a>
        </li>
        </ul>
      </div>
      <div class="col-xs-6 col-sm-9 page-main-content" style="margin-left: -15px" id="loadcontent">
        <h1 class="page-header" style="margin-top: 0px">User Profile Tutorial</h1>
        <p>This document will introduce how to start the online processing on user profiles. Assume Apache Eagle has been installed and <a href="http://sandbox.hortonworks.com:9099/eagle-service">Eagle service</a>
is started.</p>

<h3 id="user-profile-offline-training">User Profile Offline Training</h3>

<ul>
  <li>
    <p><strong>Step 1</strong>: Start Apache Spark if not started
<img src="/images/docs/start-spark.png" alt="Start Spark" /></p>
  </li>
  <li>
    <p><strong>Step 2</strong>: start offline scheduler</p>

    <ul>
      <li>
        <p>Option 1: command line</p>

        <pre><code>$ cd &lt;eagle-home&gt;/bin
$ bin/eagle-userprofile-scheduler.sh --site sandbox start
</code></pre>
      </li>
      <li>
        <p>Option 2: start via Apache Ambari
  <img src="/images/docs/offline-userprofile.png" alt="Click &quot;ops&quot;" /></p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Step 3</strong>: generate a model</p>

    <p><img src="/images/docs/userProfile1.png" alt="Click &quot;ops&quot;" />
  <img src="/images/docs/userProfile2.png" alt="Click &quot;Update Now&quot;" />
  <img src="/images/docs/userProfile3.png" alt="Click &quot;Confirm&quot;" />
  <img src="/images/docs/userProfile4.png" alt="Check" /></p>
  </li>
</ul>

<h3 id="user-profile-online-detection">User Profile Online Detection</h3>

<p>Two options to start the topology are provided.</p>

<ul>
  <li>
    <p><strong>Option 1</strong>: command line</p>

    <p>submit userProfiles topology if it’s not on <a href="http://sandbox.hortonworks.com:8744">topology UI</a></p>

    <pre><code>$ bin/eagle-topology.sh --main org.apache.eagle.security.userprofile.UserProfileDetectionMain --config conf/sandbox-userprofile-topology.conf start
</code></pre>
  </li>
  <li>
    <p><strong>Option 2</strong>: Apache Ambari</p>

    <p><img src="/images/docs/online-userprofile.png" alt="Online userProfiles" /></p>
  </li>
</ul>

<h3 id="evaluate-user-profile-in-sandbox">Evaluate User Profile in Sandbox</h3>

<ol>
  <li>Prepare sample data for ML training and validation sample data
    <ul>
      <li>a. Download following sample data to be used for training</li>
      <li><a href="/data/user1.hdfs-audit.2015-10-11-00.txt"><code>user1.hdfs-audit.2015-10-11-00.txt</code></a></li>
      <li><a href="/data/user1.hdfs-audit.2015-10-11-01.txt"><code>user1.hdfs-audit.2015-10-11-01.txt</code></a></li>
      <li>b. Downlaod <a href="/data/userprofile-validate.txt"><code>userprofile-validate.txt</code></a>file which contains data points that you can try to test the models</li>
    </ul>
  </li>
  <li>Copy the files (downloaded in the previous step) into a location in sandbox 
For example: <code>/usr/hdp/current/eagle/lib/userprofile/data/</code></li>
  <li>Modify <code>&lt;Eagle-home&gt;/conf/sandbox-userprofile-scheduler.conf </code>
update <code>training-audit-path</code> to set to the path for training data sample (the path you used for Step 1.a)
update detection-audit-path to set to the path for validation (the path you used for Step 1.b)</li>
  <li>Run ML training program from eagle UI</li>
  <li>
    <p>Produce Apache Kafka data using the contents from validate file (Step 1.b)
Run the command (assuming the eagle configuration uses Kafka topic <code>sandbox_hdfs_audit_log</code>)</p>

    <pre><code> ./kafka-console-producer.sh --broker-list sandbox.hortonworks.com:6667 --topic sandbox_hdfs_audit_log
</code></pre>
  </li>
  <li>Paste few lines of data from file validate onto kafka-console-producer 
Check <a href="http://localhost:9099/eagle-service/#/dam/alertList">http://localhost:9099/eagle-service/#/dam/alertList</a> for generated alerts</li>
</ol>

      </div><!--end of loadcontent-->  
    </div>
    <!--end of centered content--> 
  </div>
</div>
<!--end of container-->

<!-- footer start -->
<div class="footerwrapper">
  <div class="container">
    <div class="row">
      <div class="col-md-12"><div style="margin-left:auto; margin-right:auto; text-align:center;font-size: 12px">
<div>
</div>
<div>
<a href="http://www.apache.org">
<img id="asf-logo" alt="Apache Software Foundation" src="/images/apache-logo-small.gif">
</a>
</div>
<div>
Copyright © 2015 <a href="http://www.apache.org">The Apache Software Foundation</a>, Licensed under the <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.
</div>
<div>
Apache Eagle, Eagle, Apache Hadoop, Hadoop, Apache HBase, HBase, Apache Hive, Hive, Apache Ambari, Ambari, Apache Spark, Spark, Apache Kafka, Kafka, Apache Storm, Storm, Apache Maven, Maven, Apache Tomcat, Tomcat, Apache Derby, Derby, Apache Cassandra, Cassandra, Apache ZooKeeper, ZooKeeper, Apache, the Apache feather logo, and the Apache project logo are trademarks of The Apache Software Foundation.
</div>
      </div></div>
    </div>
  </div>
</div>
<!-- footer end --> 

<!-- JavaScripts -->
<script src="/js/jquery-1.11.1.min.js"></script>
<script src="/js/jquery.singlePageNav.js"></script>
<script src="/js/jquery.flexslider.js"></script>
<script src="/js/modernizr.min.js"></script>
<script src="/js/svg.js"></script>
<script>
    /************** FlexSlider *********************/
    $('.flexslider').flexslider({
        animation: "fade",
        directionNav: false
    });
</script>

<script>
    /************** FlexSlider *********************/
    $('.flexslider').flexslider({
        animation: "fade",
        directionNav: false
    });
</script>
</body>
</html>
