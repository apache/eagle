<!--
  ~ Licensed to the Apache Software Foundation (ASF) under one or more
  ~ contributor license agreements.  See the NOTICE file distributed with
  ~ this work for additional information regarding copyright ownership.
  ~ The ASF licenses this file to You under the Apache License, Version 2.0
  ~ (the "License"); you may not use this file except in compliance with
  ~ the License.  You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="width=device-width"/>
    <style>
        body {
            width: 100% !important;
            min-width: 100%;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            margin: 0;
            padding: 0;
        }

        table {
            border-spacing: 0;
            border-collapse: collapse;
        }

        table th,
        table td {
            padding: 3px 0 3px 0;
        }

        .body {
            width: 100%;
        }

        p, a, h1, h2, h3, ul, ol, li {
            font-family: Helvetica, Arial, sans-serif;
            font-weight: normal;
            margin: 0;
            padding: 0;
        }

        p {
            font-size: 14px;
            line-height: 19px;
        }

        a {
            color: #3294b1;
        }

        h1 {
            font-size: 36px;
            margin: 15px 0 5px 0;
        }

        h2 {
            font-size: 32px;
        }

        h3 {
            font-size: 28px;
        }

        ul, ol {
            margin: 0 0 0 25px;
            padding: 0;
        }

        .btn {
            background: #2ba6cb !important;
            border: 1px solid #2284a1;
            padding: 10px 20px 10px 20px;
            text-align: center;
        }

        .btn:hover {
            background: #2795b6 !important;
        }

        .btn a {
            color: #FFFFFF;
            text-decoration: none;
            font-weight: bold;
            padding: 10px 20px 10px 20px;
        }

        .tableBordered {
            border-top: 1px solid #b9e5ff;
        }

        .tableBordered th {
            background: #ECF8FF;
        }

        .tableBordered th p {
            font-weight: bold;
            color: #3294b1;
        }

        .tableBordered th,
        .tableBordered td {
            color: #333333;
            border-bottom: 1px solid #b9e5ff;
            text-align: center;
            padding-bottom: 5px;
        }

        .panel {
            height: 100px;
        }
    </style>
</head>
<body>
    #set ( $elem = $alertList[0] )
<table class="body">
    <tr>
        <td align="center" valign="top" style="background: #999999; padding: 0 0 0 0;">
            <!-- Header -->
            <table width="580">
                <tr>
                    <td style="padding: 0 0 0 0;" align="left">
                        <p style="color:#FFFFFF;font-weight: bold; font-size: 22px">Eagle Alert Notification</p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>

    <tr>
        <td align="center" valign="top">
            <!-- Eagle Body -->
            <table width="580">
                <tr>
                    <!-- Title -->
                    <td align="center">
                        <h2>[Alert] $elem["policyId"]</h2>
                    </td>
                </tr>
                <tr>
                    <!-- Time -->
                    <td>
                        <table width="580">
                            <tr>
                                <td>
                                    <p><b>Detected Time: $elem["alertTime"]</b></p>
                                </td>
                                #set ( $severity = $elem["severity"] )
                                #if (!$severity || ("$severity" == ""))
                                    #set ( $elem["severity"] = "WARNING")
                                #end
                                <td align="right">
                                    <p><b>
                                        Severity:
                                        #if ($elem["severity"] == "WARNING")
                                            <span>$elem["severity"]</span>
                                        #else
                                            <span style="color: #FF0000;">$elem["severity"]</span>
                                        #end
                                    </b></p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>

                <tr>
                    <!-- Basic Information -->
                    <td style="padding: 20px 0 10px 0;">
                        <p><b>Alert Message </b></p>
                    </td>
                </tr>
                <tr>
                    <!-- Description -->
                    <td valign="top"
                        style="background: #ECF8FF; border: 1px solid #b9e5ff; padding: 10px 10px 12px 20px;">
                        <p>$elem["alertMessage"]</p>
                    </td>
                </tr>
                <tr>
                    <!-- Basic Information -->
                    <td style="padding: 20px 0 10px 0;">
                        <p><b>Alert Detail</b></p>
                    </td>
                </tr>
                <tr>
                    <!-- Basic Information Content -->
                    <td>
                        <table class="tableBordered" width="580">
                            <tr>
                                <th>
                                    <p>Policy Name</p>
                                </th>
                                <td>
                                    <p><a href="$elem["policyDetailUrl"]">$elem["policyId"]</a></p>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <p>Severity Level</p>
                                </th>
                                <td>
                                    <p>$elem["severity"]</p>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <p>Alert Stream</p>
                                </th>
                                <td>
                                    <p>$elem["streamId"]</p>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <p>Created Time</p>
                                </th>
                                <td>
                                    <p>$elem["alertTime"]</p>
                                </td>
                            </tr>
                            <tr>
                                <th>
                                    <p>Created By</p>
                                </th>
                                <td>
                                    <p>$elem["creator"]</p>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
##                <tr>
##                    <!-- View Detail -->
##                    <td align="center" style="padding: 10px 0 0 0;">
##                        <table width="580">
##                            <tr>
##                                <td class="btn">
##                                    <a href="$elem["policyDetailUrl"]">View Policy Details</a>
##                                </td>
##                            </tr>
##                        </table>
##                    </td>
##                </tr>

                <tr>
                    <!-- View Detail -->
                    <td align="center" style="padding: 10px 0 0 0;">
                        <table width="580">
                            <tr>
                                <td class="btn">
                                    <a href="$elem["alertDetailUrl"]">View Alert on Eagle</a>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <!-- Actions Required -->
                    <td style="padding: 20px 0 10px 0;">
                        <p><b>Actions Required</b></p>
                    </td>
                </tr>
                <tr>
                    <!-- Possible Root Causes Content -->
                    <td class="panel" valign="top"
                        style="background: #F4F4F4; border: 1px solid #AAAAAA; padding: 10px 10px 12px 10px;">
                        <p>
                            The alert notification was automatically detected and sent by Eagle according to policy: $elem["policyId"].
                            To follow-up on this, please verify the alert and diagnose the root cause with Eagle:
                        </p>
                        <p></p>
                        <ul>
                            <li><p><a href="$elem["alertDetailUrl"]">View alert detail</a></p></li>
                            <li><p><a href="$elem["policyDetailUrl"]">View policy detail</a></p></li>
                            <li><p><a href="$elem["homeUrl"]">View eagle home</a></p></li>
                        </ul>
                    </td>
                </tr>
                <tr>
                    <!-- Copyright -->
                    <td align="center">
                        <p><i>Powered by <a href="http://eagle.incubator.apache.org">Apache Eagle</a> (version: $elem["version"])</i></p>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>
</body>
</html>